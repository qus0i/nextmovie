<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>From Our Readers</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Your main CSS file -->
  <link href="../All_CSS/randomreviews.css" rel="stylesheet">
</head>
<body>
  <!-- From Our Readers Section -->
  <div class="from-our-readers">
    <!-- Left Section: Title and Subtitle -->
    <div class="left-side-text">
      <h1>From Our Readers</h1>
      <p>From Our Readers to your library</p>
    </div>

    <!-- Right Section: Card with Book Details -->
    <div class="card card-custom">
  <div class="card-inner">
        <!-- Front side -->
         
        <div class="card-front">
          <!-- Left Side: Book Image -->
          <div class="card-image">
            <img id="bookImage" src="" alt="Book Image" class="skeleton skeleton-image">
          </div>

          <!-- Right Side: Book Details -->
          <div class="card-content">
            <div class="user-info">
              <img id="pfp" class="pfp skeleton skeleton-pfp" src="" alt="User profile picture">
              <div>
                <span class="username skeleton skeleton-text" id="username" style="width: 120px; display: inline-block;"></span>
                <div class="timestamp skeleton skeleton-text" id="timestamp"></div>
              </div>
            </div>

            <p id="reviewText" class="comment-text mt-3" style="color: #E7D6C4;">
              <span class="skeleton skeleton-text" style="display: block; width: 100%; height: 60px;"></span>
            </p>

            <div class="book-info align-items-end mt-auto">
              <span class="fw-bold fs-5" id="bookTitle"></span><br />
              <span class="fs-6 ctext" id="author"></span><br />
              <span class="fs-6 ctext" id="genre"></span><br />
              <span class="bookRating">â˜…</span>
              <span id="bookRating"></span>
            </div>      
            <div id="stars" class="stars d-flex flex-row justify-content-end"></div>
          </div>
        </div>
        <!-- Back side -->
        <div class="card-back">
          <div class="back-content">
            <h3>Loading next review...</h3>
            <div class="loading-spinner" id="loadingSpinner"></div>
          </div>
        </div>
      </div>
</a>
    </div>
  </div>

  <!-- Navigation Buttons -->
  <div class="navigation-wrapper">
    <button id="prevBtn" class="btn-nav">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24">
        <path d="M15.41 7.41L10.83 12l4.58 4.59L14 18l-6-6 6-6 1.41 1.41z"/>
      </svg>
    </button>
    <button id="nextBtn" class="btn-nav">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24">
        <path d="M8.59 7.41L13.17 12l-4.58 4.59L10 18l6-6-6-6-1.41 1.41z"/>
      </svg>
    </button>
  </div>




  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <!-- Your JavaScript file -->
  <script src="../All_JS/randomReviews.js"></script>
  <script>
    // Automatically send height updates to parent page
    function updateIframeHeight() {
      const height = document.documentElement.scrollHeight;
      window.parent.postMessage(
        { type: 'reviewsHeight', height: height },
        '*' // Allow sending to any parent (for local testing)
      );
    }
    
    // Initial height send
    document.addEventListener('DOMContentLoaded', updateIframeHeight);
    
    // Monitor for dynamic content changes
    new MutationObserver(updateIframeHeight).observe(document.body, {
      subtree: true,
      childList: true,
      characterData: true
    });
    
    // Optional: Update on window resize (for responsive changes)
    window.addEventListener('resize', updateIframeHeight);
    </script>
</body>
</html>